install.packages("RMySQL")
library(RMySQL)
con = dbConnect(MySQL(),
user='deepAnalytics',
password='Sqltask1234!',
dbname='dataanalytics2018',
host='data-analytics-2018.cbrosir2cswx.us-east-1.rds.amazonaws.com')
dbListTables(con)
dbListFields(con,'iris')
dbListFields(con,'yr_2006')
irisALL <- dbGetQuery(con, "SELECT * FROM iris")
irisALL
irisSELECT <- dbGetQuery(con, "SELECT SepalLengthCm, SepalWidthCm FROM iris")
yr_2006 <- dbGetQuery(con, "SELECT Date, Time, Sub_metering_1 , Sub_metering_2, Sub_metering_3
FROM yr_2006")
yr_2007 <- dbGetQuery(con, "SELECT Date, Time, Sub_metering_1 , Sub_metering_2, Sub_metering_3
FROM yr_2007")
yr_2008 <- dbGetQuery(con, "SELECT Date, Time, Sub_metering_1 , Sub_metering_2, Sub_metering_3
FROM yr_2008")
yr_2009 <- dbGetQuery(con, "SELECT Date, Time, Sub_metering_1 , Sub_metering_2, Sub_metering_3
FROM yr_2009")
yr_2010 <- dbGetQuery(con, "SELECT Date, Time, Sub_metering_1 , Sub_metering_2, Sub_metering_3
FROM yr_2010")
dbGetQuery(con, "SELECT max(Date), FROM yr_2010")
str(yr_2006)
summary(yr_2006)
FROM yr_2010")
str(yr_2007)
summary(yr_2007)
str(yr_2008)
summary(yr_2008)
str(yr_2009)
summary(yr_2009)
str(yr_2010)
summary(yr_2010)
head(yr_2006)
tail(yr_2006)
head(yr_2007)
tail(yr_2007)
head(yr_2008)
tail(yr_2008)
head(yr_2009)
tail(yr_2009)
head(yr_2010)
tail(yr_2010)
data789 <- bind_rows(yr_2007, yr_2008, yr_2009)
library(dplyr)
data789 <- bind_rows(yr_2007, yr_2008, yr_2009)
str(data789)
data789 <- arrange(data789, date, Time)
data789 <- arrange(data789, Date, Time)
head(data789)
data789 %>%   group_by(Date) %>%
summarise(minutecount=n())
data789 %>%   group_by(Date) %>%
summarise(minutecount=n()) %>% filter(minutecount!=1440)
head(data789 %>%   group_by(Date) %>%
summarise(minutecount=n()) %>% filter(minutecount!=1440),50)
data789 %>%   group_by(Date) %>%
summarise(minutecount=n()) %>% filter(minutecount!=1440)
arrange(data789 %>%   group_by(Date) %>%
summarise(minutecount=n()) %>% filter(minutecount!=1440), minutecount)
arrange(data789 %>%   group_by(Date) %>%
summarise(minutecount=n()) %>% filter(minutecount!=1440), desc(minutecount))
arrange(data789 %>%   group_by(Date) %>%
summarise(minutecount=n()) %>% filter(minutecount!=1440), minutecount)
daily789 <-arrange(data789 %>%   group_by(Date) %>%
summarise(minutecount=n(), sub1=sum(Sub_metering_1),
sub2=sum(Sub_metering_2), sub3=sum(Sub_metering_3)), date)
daily789 <-data789 %>%   group_by(Date) %>%
summarise(minutecount=n(), sub1=sum(Sub_metering_1),
sub2=sum(Sub_metering_2), sub3=sum(Sub_metering_3))
daily789 <-arrange(data789 %>%   group_by(Date) %>%
summarise(minutecount=n(), sub1=sum(Sub_metering_1),
sub2=sum(Sub_metering_2), sub3=sum(Sub_metering_3)), Date)
library(ggplot2)
ggplot(daily789, aes(Date, sub1))
ggplot(daily789, aes(Date, sub1)) + geom_line()
ggplot(daily789, aes(Date, sub1)) + geom_line() +
scale_x_date(format = "%b-%Y") + xlab("")
head(daily789)
ggplot(daily789, aes(Date, sub1)) + geom_line()
ggplot(daily789, aes(x=Date, y=sub1)) + geom_line()
ggplot(daily789, aes(x=Date, y=sub1)) + geom_point()
ggplot(data=daily789, aes(x=Date, y=sub1)) + geom_line()
ggplot(data=daily789, aes(x=Date, y=sub1, group=1)) + geom_line()
ggplot(data=daily789, aes(x=Date, y=sub2, group=1)) + geom_line()
summary(daily789)
ggplot(data=daily789, aes(x=Date, y=sub3, group=1)) + geom_line()
str(data789)
data789$datetime <- cbind(data789,paste(data789$Date,data789$Time), stringsAsFactors=FALSE)
str(data789)
colnames(data789)[6] <-"DateTime"
str(data789)
colnames(data789)[6] <-"DateTime"
str(data789)
colnames(data789)[6] <-"DateTime"
str(data789)
data789 <- data789[,c(ncol(data789), 1:(ncol(data789)-1))]
head(data789)
data789 <- bind_rows(yr_2007, yr_2008, yr_2009)
data789 <- arrange(data789, Date, Time)
str(data789)
data789$datetimebb <- cbind(data789,paste(data789$Date,data789$Time), stringsAsFactors=FALSE)
str(data789)
data789 <- bind_rows(yr_2007, yr_2008, yr_2009)
data789 <- arrange(data789, Date, Time)
data789 <- cbind(data789,paste(data789$Date,data789$Time), stringsAsFactors=FALSE)
str(data789)
colnames(data789)[6] <-"DateTime"
str(data789)
data789 <- data789[,c(ncol(data789), 1:(ncol(data789)-1))]
str(data789)
head(data789)
data789$DateTime <- as.POSIXct(data789$DateTime, "%Y/%m/%d %H:%M:%S")
str(data789)
attr(data789$DateTime, "tzone") <- "Europe/Paris"
str(data789)
daily789 <-arrange(data789 %>%   group_by(Date) %>%
summarise(minutecount=n(), sub1=sum(Sub_metering_1),
sub2=sum(Sub_metering_2), sub3=sum(Sub_metering_3)), Date)
arrange(data789 %>%   group_by(Date) %>%
summarise(minutecount=n()) %>%
filter(minutecount!=1440)), minutecount)
arrange(data789 %>% group_by(Date) %>%
summarise(minutecount=n()) %>%
filter(minutecount!=1440), minutecount)
install.packages("lubridate")
library(lubridate)
data789$year <- year(data789$DateTime)
str(data789)
summary(data789)
data789$yearmonth <- year(data789$DateTime)*100+month(data789$DateTime)
summary(data789)
data789
monthly789 <- arrange(data789 %>%   group_by(yearmonth) %>%
summarise(minutecount=n(), sub1=sum(Sub_metering_1),
sub2=sum(Sub_metering_2), sub3=sum(Sub_metering_3)), yearmonth)
library(RMySQL)
library(dplyr)
library(ggplot2)
library(lubridate)
monthly789 <- arrange(data789 %>%   group_by(yearmonth) %>%
summarise(minutecount=n(), sub1=sum(Sub_metering_1),
sub2=sum(Sub_metering_2), sub3=sum(Sub_metering_3)), yearmonth)
monthly789
ggplot(data=monthly789, aes(x=Date, y=sub1, group=1)) + geom_line()
ggplot(data=monthly789, aes(x=yearmonth, y=sub1, group=1)) + geom_line()
ggplot(data=monthly789, aes(x=yearmonth, y=sub2, group=1)) + geom_line()
ggplot(data=monthly789, aes(x=yearmonth, y=sub3, group=1)) + geom_line()
str(monthly789)
as.character(monthly789$yearmonth)
ggplot(data=monthly789, aes(x=yearmonth, y=sub1, group=1)) + geom_line()
str(monthly789)
monthly789$yearmonth <- as.character(monthly789$yearmonth)
str(monthly789)
ggplot(data=monthly789, aes(x=yearmonth, y=sub1, group=1)) + geom_line()
ggplot(data=monthly789, aes(x=yearmonth, y=sub2, group=1)) + geom_line()
ggplot(data=monthly789, aes(x=yearmonth, y=sub3, group=1)) + geom_line()
ggplot(data=monthly789, aes(x=yearmonth, y=sub2, group=1)) + geom_line()
str(data789)
data789$Date <- as.Date(data789$Date)
str(data789)
data789$WD <- wday(data789$Date, label=TRUE)
WD789 <- arrange(data789 %>%   group_by(WD) %>%
summarise(minutecount=n(), sub1=sum(Sub_metering_1),
sub2=sum(Sub_metering_2), sub3=sum(Sub_metering_3)), WD)
ggplot(data=monthly789, aes(x=yearmonth, y=sub1)) + geom_bar()
ggplot(data=monthly789, aes(x=yearmonth)) +
geom_bar(aes(y=Quantity),stat="identity", fill="red")
ggplot(data=monthly789, aes(x=yearmonth)) +
geom_bar(aes(y=sub1),stat="identity", fill="red")
ggplot(data=WD789, aes(x=wd)) +
geom_bar(aes(y=sub1),stat="identity", fill="red")
ggplot(data=WD789, aes(x=WD)) +
geom_bar(aes(y=sub1),stat="identity", fill="red")
ggplot(data=WD789, aes(x=WD)) +
geom_bar(aes(y=sub1),stat="identity") +
scale_fill_manual(values=c("red", "grey50", "grey50", "grey50", "grey50", "grey50", "red"))
ggplot(data=WD789, aes(x=WD)) +
geom_bar(aes(y=sub1),stat="identity", fill=area) +
scale_fill_manual(values=c("red", "grey50", "grey50", "grey50", "grey50", "grey50", "red"))
ggplot(data=WD789, aes(x=WD)) +
geom_bar(aes(y=sub1),stat="identity", fill=WD) +
scale_fill_manual(values=c("red", "grey50", "grey50", "grey50", "grey50", "grey50", "red"))
ggplot(data=WD789, aes(x=WD)) +
geom_bar(aes(y=sub1),stat="identity") +
scale_fill_manual(values=c("red", "grey50", "grey50", "grey50", "grey50", "grey50", "red"))
ggplot(data=WD789, aes(x=WD, y=sub1)) +
geom_bar(aes(,stat="identity") +
scale_fill_manual(values=c("red", "grey50", "grey50", "grey50", "grey50", "grey50", "red"))
ggplot(data=WD789, aes(x=WD, y=sub1)) +
geom_bar(aes(stat="identity")) +
scale_fill_manual(values=c("red", "grey50", "grey50", "grey50", "grey50", "grey50", "red"))
ggplot(data=monthly789, aes(x=yearmonth, y=sub3, group=1)) + geom_line()
ggplot(data=WD789, aes(x=WD, y=sub1)) +
geom_bar(aes(stat="identity")) +
scale_fill_manual(values=c("red", "grey50", "grey50", "grey50", "grey50", "grey50", "red"))
ggplot(data=WD789, aes(x=WD)) +
geom_bar(aes(y=sub1,stat="identity")) +
scale_fill_manual(values=c("red", "grey50", "grey50", "grey50", "grey50", "grey50", "red"))
ggplot(data=WD789, aes(x=WD)) +
geom_bar(aes(y=sub1,stat="identity"))
ggplot(data=WD789, aes(x=WD)) +
geom_bar(aes(y=sub1))
ggplot(data=WD789, aes(x=WD,y = sub1)) +geom_bar(stat = "identity")
WD.color <- c("red", "grey50", "grey50", "grey50", "grey50", "grey50", "red"))
WD.color <- c("red", "grey50", "grey50", "grey50", "grey50", "grey50", "red")
ggplot(data=WD789, aes(x=WD,y = sub1, fill=WD.color)) +geom_bar(stat = "identity")
ggplot(data=WD789, aes(x=WD,y = sub1, fill=factor(ifelse(WD=="zo","Weekend","Weekday")))) +
geom_bar(stat = "identity") +
scale_fill_manual(name = "area", values=c("red","grey50"))
ggplot(data=WD789, aes(x=WD,y = sub1, fill=factor(ifelse(WD=="zo" | WD=="za","Weekend","Weekday")))) +
geom_bar(stat = "identity") +
scale_fill_manual(name = "area", values=c("red","grey50"))
ggplot(data=WD789, aes(x=WD,y = sub1, fill=factor(ifelse(WD=="zo" | WD=="za","Weekend","Weekday")))) +
geom_bar(stat = "identity") +
scale_fill_manual(name = "area", values=c("grey50", "red"))
ggplot(data=WD789, aes(x=WD,y = sub2, fill=factor(ifelse(WD=="zo" | WD=="za","Weekend","Weekday")))) +
geom_bar(stat = "identity") +
scale_fill_manual(name = "area", values=c("grey50", "red"))
ggplot(data=WD789, aes(x=WD,y = sub3, fill=factor(ifelse(WD=="zo" | WD=="za","Weekend","Weekday")))) +
geom_bar(stat = "identity") +
scale_fill_manual(name = "area", values=c("grey50", "red"))
ggplot(data=WD789, aes(x=WD,y = sub1, fill=factor(ifelse(WD=="zo" | WD=="za","Weekend","Weekday")))) +
geom_bar(stat = "identity") +
scale_fill_manual(name = "area", values=c("grey50", "red"))
daily789 <- arrange(data789 %>%   group_by(Date) %>%
summarise(minutecount=n(), sub1=sum(Sub_metering_1),
sub2=sum(Sub_metering_2), sub3=sum(Sub_metering_3)), Date)
ggplot(data=daily789, aes(x=Date, y=sub1, group=1)) + geom_line()
ggplot(data=daily789, aes(x=Date, y=sub2, group=1)) + geom_line()
ggplot(data=daily789, aes(x=Date, y=sub3, group=1)) + geom_line()
ggplot(data=daily789, aes(x=Date, y=sub1, group=1)) + geom_line(color="red")
ggplot(data=daily789, aes(x=Date, y=sub2, group=1)) + geom_line(color="blue")
ggplot(data=daily789, aes(x=Date, y=sub3, group=1)) + geom_line(color="green")
ggplot(data=WD789, aes(x=WD,y = sub1, fill=factor(ifelse(WD=="zo" | WD=="za","Weekend","Weekday")))) +
geom_bar(stat = "identity") +
scale_fill_manual(name = "part of week", values=c("grey50", "red"))
library(shiny); runApp('Shinyapp03.R')
runApp('Shinyapp03.R')
runApp('Shinyapp03.R')
runApp('Shinyapp03.R')
runApp('Shinyapp03.R')
runApp('Shinyapp03.R')
runApp('Shinyapp03.R')
runApp('Shinyapp03.R')
runApp('Shinyapp03.R')
